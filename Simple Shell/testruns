Script started on 2020-04-09 13:43:58-0400
jeremyaf@cisc361:~/prog/projects/simpleshell$ ./mysh
 [/usa/jeremyaf/prog/projects/simpleshell]> ^D
jeremyaf@cisc361:~/prog/projects/simpleshell$ ./mysh
 [/usa/jeremyaf/prog/projects/simpleshell]> ^Z^Cwhich
Executing built-in 'which' command.
 [/usa/jeremyaf/prog/projects/simpleshell]> which ls
Executing built-in 'which' command.
/bin/ls
 [/usa/jeremyaf/prog/projects/simpleshell]> ls
Executing 'ls'.
a.out  Makefile  mysh  path.c  path.h  shell.c	shell.h  testruns
Command 'ls' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> 
 [/usa/jeremyaf/prog/projects/simpleshell]> ^D
jeremyaf@cisc361:~/prog/projects/simpleshell$ ./mysh
 [/usa/jeremyaf/prog/projects/simpleshell]> ^Z^Cls -l
Executing 'ls'.
total 34
-rwxrwxr-x 1 jeremyaf jeremyaf  8392 Apr  9 13:36 a.out
-rw-rw-r-- 1 jeremyaf jeremyaf    49 Apr  4 16:19 Makefile
-rwxrwxr-x 1 jeremyaf jeremyaf 23128 Apr  9 13:20 mysh
-rw-rw-r-- 1 jeremyaf jeremyaf   949 Apr  9 12:24 path.c
-rw-rw-r-- 1 jeremyaf jeremyaf   237 Apr  1 13:34 path.h
-rw-rw-r-- 1 jeremyaf jeremyaf 15401 Apr  9 13:20 shell.c
-rw-rw-r-- 1 jeremyaf jeremyaf  1301 Apr  9 13:13 shell.h
-rw-rw-r-- 1 jeremyaf jeremyaf     0 Apr  9 13:43 testruns
Command 'ls' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> ls -l -a /proc/tty
Executing 'ls'.
total 0
dr-xr-xr-x   4 root root 0 Apr  9 13:45 .
dr-xr-xr-x 188 root root 0 Jan 31 16:01 ..
dr-x------   2 root root 0 Apr  9 13:45 driver
-r--r--r--   1 root root 0 Apr  9 13:45 drivers
dr-xr-xr-x   2 root root 0 Apr  9 13:45 ldisc
-r--r--r--   1 root root 0 Apr  9 13:45 ldiscs
Command 'ls' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> ls -l -F /proc/tty
Executing 'ls'.
total 0
dr-x------ 2 root root 0 Apr  9 13:45 driver/
-r--r--r-- 1 root root 0 Apr  9 13:45 drivers
dr-xr-xr-x 2 root root 0 Apr  9 13:45 ldisc/
-r--r--r-- 1 root root 0 Apr  9 13:45 ldiscs
Command 'ls' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> ls -l -f   F /etcx/  /perl
Executing 'ls'.
total 8
drwxr-xr-x 2 root root 4096 Nov 19  2018 CPAN/
drwxr-xr-x 2 root root 4096 Feb  3 12:57 Net/
Command 'ls' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> ls -l -a /etc/perl
Executing 'ls'.
total 16
drwxr-xr-x  4 root root 4096 Feb  3 12:57 .
drwxr-xr-x 99 root root 4096 Apr  4 06:20 ..
drwxr-xr-x  2 root root 4096 Nov 19  2018 CPAN
drwxr-xr-x  2 root root 4096 Feb  3 12:57 Net
Command 'ls' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> where
Executing built-in 'where' command.
 [/usa/jeremyaf/prog/projects/simpleshell]> where ls
Executing built-in 'where' command.
/bin/ls
 [/usa/jeremyaf/prog/projects/simpleshell]> /bin/ls -l -g
Executing '/bin/ls'.
total 34
-rwxrwxr-x 1 jeremyaf  8392 Apr  9 13:36 a.out
-rw-rw-r-- 1 jeremyaf    49 Apr  4 16:19 Makefile
-rwxrwxr-x 1 jeremyaf 23128 Apr  9 13:20 mysh
-rw-rw-r-- 1 jeremyaf   949 Apr  9 12:24 path.c
-rw-rw-r-- 1 jeremyaf   237 Apr  1 13:34 path.h
-rw-rw-r-- 1 jeremyaf 15401 Apr  9 13:20 shell.c
-rw-rw-r-- 1 jeremyaf  1301 Apr  9 13:13 shell.h
-rw-rw-r-- 1 jeremyaf     0 Apr  9 13:43 testruns
Command '/bin/ls' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> fi  /bin./  /ls -l
Executing '/bin/ls'.
total 34
-rwxrwxr-x 1 jeremyaf jeremyaf  8392 Apr  9 13:36 a.out
-rw-rw-r-- 1 jeremyaf jeremyaf    49 Apr  4 16:19 Makefile
-rwxrwxr-x 1 jeremyaf jeremyaf 23128 Apr  9 13:20 mysh
-rw-rw-r-- 1 jeremyaf jeremyaf   949 Apr  9 12:24 path.c
-rw-rw-r-- 1 jeremyaf jeremyaf   237 Apr  1 13:34 path.h
-rw-rw-r-- 1 jeremyaf jeremyaf 15401 Apr  9 13:20 shell.c
-rw-rw-r-- 1 jeremyaf jeremyaf  1301 Apr  9 13:13 shell.h
-rw-rw-r-- 1 jeremyaf jeremyaf     0 Apr  9 13:43 testruns
Command '/bin/ls' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> file *
Executing 'file'.
Makefile: ASCII text
a.out:    ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/l, for GNU/Linux 3.2.0, BuildID[sha1]=099f06786afa5cb48e8ad34c2df86ee7b61d8612, not stripped
mysh:     ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/l, for GNU/Linux 3.2.0, BuildID[sha1]=82246b7b74802052e0e6b3cec49c2d8a67656556, not stripped
path.c:   C source, ASCII text
path.h:   C source, ASCII text
shell.c:  C source, ASCII text
shell.h:  C source, ASCII text
testruns: empty
Command 'file' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> ls *
Executing 'ls'.
a.out  Makefile  mysh  path.c  path.h  shell.c	shell.h  testruns
Command 'ls' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> ls *.c
Executing 'ls'.
path.c	shell.c
Command 'ls' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> ls -l shell.*
Executing 'ls'.
-rw-rw-r-- 1 jeremyaf jeremyaf 15401 Apr  9 13:20 shell.c
-rw-rw-r-- 1 jeremyaf jeremyaf  1301 Apr  9 13:13 shell.h
Command 'ls' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> ls 0l    -l s*.c
Executing 'ls'.
-rw-rw-r-- 1 jeremyaf jeremyaf 15401 Apr  9 13:20 shell.c
Command 'ls' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> ls -l s*hell.c
Executing 'ls'.
-rw-rw-r-- 1 jeremyaf jeremyaf 15401 Apr  9 13:20 shell.c
Command 'ls' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> ls shell.?^[[D^[[D^[[D^[[D^[[D^[[D^[[D^[[D^[[D^[[D                                               - shell.?
Executing 'ls'.
shell.c  shell.h
Command 'ls' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> ls ?hell.c
Executing 'ls'.
shell.c
Command 'ls' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> ls */ .?
Executing 'ls'.
path.c	path.h	shell.c  shell.h
Command 'ls' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> blagh  h
Command 'blah' could not be found.
 [/usa/jeremyaf/prog/projects/simpleshell]> /blah
Command '/blah' could not be found.
 [/usa/jeremyaf/prog/projects/simpleshell]> ls 0-  -l /blah
Executing 'ls'.
ls: cannot access '/blah': No such file or directory
Command 'ls' had an exit status of [2].
 [/usa/jeremyaf/prog/projects/simpleshell]> /usr/bin
Command '/usr/bin' could not be found.
 [/usa/jeremyaf/prog/projects/simpleshell]> /bin./  /ls -la / /
Executing '/bin/ls'.
total 450316
drwxr-xr-x  25 root root      4096 Apr  7 06:25 .
drwxr-xr-x  25 root root      4096 Apr  7 06:25 ..
drwxr-xr-x   2 root root      4096 Feb  7 06:10 bin
drwxr-xr-x   3 root root      4096 Apr  8 06:36 boot
drwxr-xr-x  20 root root      3900 Jan 31 16:10 dev
drwxr-xr-x  99 root root      4096 Apr  4 06:20 etc
drwxr-xr-x   4 root root      4096 Jan 17  2019 home
lrwxrwxrwx   1 root root        33 Apr  7 06:25 initrd.img -> boot/initrd.img-4.15.0-96-generic
lrwxrwxrwx   1 root root        33 Apr  7 06:25 initrd.img.old -> boot/initrd.img-4.15.0-91-generic
drwxr-xr-x  21 root root      4096 Feb 17 16:20 lib
drwxr-xr-x   2 root root      4096 Feb  3 12:48 lib32
drwxr-xr-x   2 root root      4096 Jan 17  2019 lib64
drwxr-xr-x   2 root root      4096 Feb  3 12:48 libx32
drwx------   2 root root     16384 Jan 17  2019 lost+found
drwxr-xr-x   2 root root      4096 Jan 17  2019 media
drwxr-xr-x   2 root root      4096 Jan 17  2019 mnt
drwxr-xr-x   2 root root      4096 Jan 17  2019 opt
dr-xr-xr-x 187 root root         0 Jan 31 16:01 proc
drwx------   5 root root      4096 Feb 17 16:31 root
drwxr-xr-x  28 root root      1140 Apr  9 13:13 run
drwxr-xr-x   2 root root     12288 Feb 17 16:20 sbin
drwxr-xr-x   2 root root      4096 Jan 17  2019 srv
-rw-------   1 root root 461025280 Jan 17  2019 swapfile
dr-xr-xr-x  13 root root         0 Feb 11 12:51 sys
drwxrwxrwt  10 root root       680 Apr  9 13:36 tmp
drwxr-xr-x  10 root root         0 Apr  9 12:34 usa
drwxr-xr-x  12 root root      4096 Feb  3 12:48 usr
drwxr-xr-x  13 root root      4096 Jan 24  2019 var
lrwxrwxrwx   1 root root        30 Apr  7 06:25 vmlinuz -> boot/vmlinuz-4.15.0-96-generic
lrwxrwxrwx   1 root root        30 Apr  7 06:25 vmlinuz.old -> boot/vmlinuz-4.15.0-91-generic
Command '/bin/ls' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> file /bin/ls bin   /bin/rm
Executing 'file'.
/bin/ls: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/l, for GNU/Linux 3.2.0, BuildID[sha1]=9567f9a28e66f4d7ec4baf31cfbf68d0410f0ae6, stripped
/bin/rm: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/l, for GNU/Linux 3.2.0, BuildID[sha1]=864c9bbef111ce358b3452cf7ea457d292ba93f0, stripped
Command 'file' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> which ls rm
Executing built-in 'which' command.
/bin/ls
/bin/rm
 [/usa/jeremyaf/prog/projects/simpleshell]> where ls rm
Executing built-in 'where' command.
/bin/ls
/bin/rm
 [/usa/jeremyaf/prog/projects/simpleshell]> list
Executing built-in 'list' command.
/usa/jeremyaf/prog/projects/simpleshell:
.
..
testruns
shell.h
Makefile
path.c
mysh
a.out
shell.c
path.h
 [/usa/jeremyaf/prog/projects/simpleshell]> list / /usr/proc/binm 
Executing built-in 'list' command.
/:
initrd.img.old
libx32
sbin
dev
usa
tmp
home
opt
initrd.img
.
boot
bin
run
root
lib
vmlinuz
lost+found
media
sys
var
mnt
lib64
proc
usr
swapfile
vmlinuz.old
srv
..
etc
lib32
/usr/proc/bin: Command 'list' encountered a stat error: No such file or directory
 [/usa/jeremyaf/prog/projects/simpleshell]> cd
Executing built-in 'cd' command.
 [/usa/jeremyaf]> pwd
Executing built-in 'pwd' command.
/usa/jeremyaf
 [/usa/jeremyaf]> cd /blah
Executing built-in 'cd' command.
Command 'cd' encountered a stat error: No such file or directory
 [/usa/jeremyaf]> cd /usr/bin /usr/ucb
Executing built-in 'cd' command.
Command 'cd' expected 0 or 1 arguments, received 2.
 [/usa/jeremyaf]> cd -
Executing built-in 'cd' command.
 [/usa/jeremyaf/prog/projects/simpleshell]> pwd
Executing built-in 'pwd' command.
/usa/jeremyaf/prog/projects/simpleshell
 [/usa/jeremyaf/prog/projects/simpleshell]> more shell.c
Executing 'more'.
#include "shell.h"

int main(int mainc, char **mainv)
{
	char  *prefix = (char *)malloc(sizeof(char) * MAXPREF);
	char  *prevDir = (char *)malloc(sizeof(char) * MAXLINE);
	char  *buffer = (char *)malloc(sizeof(char) * MAXLINE);
	struct pathelement *pathEnv = getPath(getenv("PATH"));

	// Timeout is in seconds but will be converted to microseconds for use.
	// If atoi fails, it will return 0 and timeout will be set to 0 anyways.
	int timeout = (mainc > 1) ? atoi(mainv[1]) : 0;
	int shouldExit = 0;
	int currentIgnoreEOFCount = 1;

	strcpy(prefix, "");
	strcpy(prevDir, "");

	signal(SIGINT, signalHandler);
	signal(SIGTSTP, SIG_IGN);
	signal(SIGTERM, SIG_IGN);

	while (1)
	{
		printPrompt(prefix, buffer);
		
		if (fgets(buffer, MAXLINE, stdin) == NULL)
		{
			char *ignoreeof = getenv("ignoreeof");
			int maxIgnoreEOFCount = (ignoreeof != NULL) ? atoi(ignoreeof) : 1;
			
			// ^D will be ignored if ignoreeof is equal to 0 or '\n'.
			//
			// ^D will cause the shell to exit if ignoreeof is greater than 0 and
			// EOF has been created ignoreeof number of times.
			//
			// ^D will cause the shell will exit immediately if ignoreeof is not set, 
			// ignoreeof is set to a non-number, or if ignoreeof is set to a number
			// less than 0
			if (ignoreeof != NULL && (strcmp(ignoreeof, "") == 0 || strcmp(ignoreeof, "0") == 0))
			{
				printf("Use command 'exit' to leave the shell.\n");
				continue;
			}
			else if (currentIgnoreEOFCount >= maxIgnoreEOFCount)
			{
				printf("^D\n");
				break;
			}
			else
			{
				currentIgnoreEOFCount++;
				printf("Use command 'exit' to leave the shell.\n");
				continue;
			}
		}

		if (buffer[strlen(buffer) - 1] == '\n')
		{
			buffer[strlen(buffer) - 1] = '\0';
		}
		
[7m--More--(11%)[27m[KCommand 'more' had an exit status of [0].
 [/usa/jeremyaf/prog/projects/simpleshell]> cd /usr/bin
Executing built-in 'cd' command.
 [/usr/bin]> pwd
Executing built-in 'pwd' command.
/usr/bin
 [/usr/bin]> ./ls /
Executing './ls'.
bin  boot  dev	etc  home  initrd.img  initrd.img.old  lib  lib32  lib64  libx32  lost+found  media  mnt  opt  proc  root  run	sbin  srv  swapfile  sys  tmp  usa  usr  var  vmlinuz  vmlinuz.old
Command './ls' had an exit status of [0].
 [/usr/bin]> ../bin/ls /
Executing '../bin/ls'.
bin  boot  dev	etc  home  initrd.img  initrd.img.old  lib  lib32  lib64  libx32  lost+found  media  mnt  opt  proc  root  run	sbin  srv  swapfile  sys  tmp  usa  usr  var  vmlinuz  vmlinuz.old
Command '../bin/ls' had an exit status of [0].
 [/usr/bin]> pwd
Executing built-in 'pwd' command.
/usr/bin
 [/usr/bin]> pid
Executing built-in 'pid' command.
SHELL: pid [3080] groupid [3080].
 [/usr/bin]> kill
Executing built-in 'kill' command.
Command 'kill' expected at least 1 argument, received 0.
 [/usr/bin]> kill 3080
Executing built-in 'kill' command.
 [/usr/bin]> kill -1 3080
Executing built-in 'kill' command.
Hangup
jeremyaf@cisc361:~/prog/projects/simpleshell$ ./mysh
 [/usa/jeremyaf/prog/projects/simpleshell]> prompt
Executing built-in 'prompt' command.
Enter a prompt prefix: prompt
prompt [/usa/jeremyaf/prog/projects/simpleshell]> prompt 361shell
Executing built-in 'prompt' command.
361shell [/usa/jeremyaf/prog/projects/simpleshell]> prn intenv PATH
Executing built-in 'printenv' command.
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games
361shell [/usa/jeremyaf/prog/projects/simpleshell]> prti  intenv
Executing built-in 'printenv' command.
SSH_CONNECTION=10.7.149.118 54658 10.10.31.222 22
SSH_CONNECTION=10.7.149.118 54658 10.10.31.222 22
LANG=en_US.UTF-8
OLDPWD=/usa/jeremyaf/prog/projects
XDG_SESSION_ID=6845
USER=jeremyaf
PWD=/usa/jeremyaf/prog/projects/simpleshell
HOME=/usa/jeremyaf
SSH_CLIENT=10.7.149.118 54658 22
KRB5CCNAME=FILE:/tmp/krb5cc_41414_gTq9iF5HQ3
SSH_TTY=/dev/pts/2
MAIL=/var/mail/jeremyaf
SHELL=/bin/bash
TERM=xterm
SHLVL=2
LOGNAME=jeremyaf
XDG_RUNTIME_DIR=/run/user/41414
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games
_=./mysh
361shell [/usa/jeremyaf/prog/projects/simpleshell]> setenv
Executing built-in 'setenv' command.
SSH_CONNECTION=10.7.149.118 54658 10.10.31.222 22
SSH_CONNECTION=10.7.149.118 54658 10.10.31.222 22
LANG=en_US.UTF-8
OLDPWD=/usa/jeremyaf/prog/projects
XDG_SESSION_ID=6845
USER=jeremyaf
PWD=/usa/jeremyaf/prog/projects/simpleshell
HOME=/usa/jeremyaf
SSH_CLIENT=10.7.149.118 54658 22
KRB5CCNAME=FILE:/tmp/krb5cc_41414_gTq9iF5HQ3
SSH_TTY=/dev/pts/2
MAIL=/var/mail/jeremyaf
SHELL=/bin/bash
TERM=xterm
SHLVL=2
LOGNAME=jeremyaf
XDG_RUNTIME_DIR=/run/user/41414
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games
_=./mysh
361shell [/usa/jeremyaf/prog/projects/simpleshell]> setenv TEST
Executing built-in 'setenv' command.
361shell [/usa/jeremyaf/prog/projects/simpleshell]> por  rintenv TEST
Executing built-in 'printenv' command.
TEST=
361shell [/usa/jeremyaf/prog/projects/simpleshell]> setenv TEST testing
Executing built-in 'setenv' command.
361shell [/usa/jeremyaf/prog/projects/simpleshell]> printenv TEST
Executing built-in 'printenv' command.
TEST=testing
361shell [/usa/jeremyaf/prog/projects/simpleshell]> setre  env TEST testing more
Executing built-in 'setenv' command.
Command 'setenv' expected 0, 1, or 2 arguments, received 3.
361shell [/usa/jeremyaf/prog/projects/simpleshell]> setenv HOME /
Executing built-in 'setenv' command.
361shell [/usa/jeremyaf/prog/projects/simpleshell]> cd
Executing built-in 'cd' command.
361shell [/]> pwd
Executing built-in 'pwd' command.
/
361shell [/]> exit
Executing built-in 'exit' command.
jeremyaf@cisc361:~/prog/projects/simpleshell$ exit
exit

Script done on 2020-04-09 13:53:32-0400
